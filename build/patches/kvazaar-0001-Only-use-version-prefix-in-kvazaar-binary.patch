From c515796a211a0f03ab62f594d49562a8d92f5c77 Mon Sep 17 00:00:00 2001
From: Ricardo Constantino <wiiaboo@gmail.com>
Date: Wed, 9 Mar 2016 16:13:59 +0000
Subject: [PATCH] Only use version prefix in kvazaar binary

Fixes regression since 54f08f2 causing libkvazaar version checks to not
work (i.e. pkg-config)
---
 src/global.h     | 2 +-
 tools/version.sh | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/global.h b/src/global.h
index ba97a54..58b3f77 100644
--- a/src/global.h
+++ b/src/global.h
@@ -182,7 +182,7 @@ typedef int16_t coeff_t;
 // NOTE: When making a release, check to see if incrementing libversion in 
 // configure.ac is necessary.
 #ifndef KVZ_VERSION
-#define KVZ_VERSION v0.8.3
+#define KVZ_VERSION 0.8.3
 #endif
 #define VERSION_STRING QUOTE_EXPAND(KVZ_VERSION)
 
diff --git a/tools/version.sh b/tools/version.sh
index 07dffd3..2a0d2cc 100755
--- a/tools/version.sh
+++ b/tools/version.sh
@@ -6,7 +6,7 @@ cd ..
 if type git >/dev/null 2>/dev/null && [ -d .git ]; then
     version="$(git describe --dirty --tags --match 'v*')"
 else
-    version="$(awk '/#define KVZ_VERSION/ { print $3 }' src/global.h)"
+    version="v$(awk '/#define KVZ_VERSION/ { print $3 }' src/global.h)"
 fi
 
 printf '%s\n' "$version"
-- 
2.7.2

